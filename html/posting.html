<!DOCTYPE html>

<html>

  <head>
    <link rel="stylesheet" href="http://localhost/style.css ">
    <title> Forms </title>

  </head>
  <body onload="addPost()">

    <script type="text/javascript">
    
      function addPost(){
        var http = new XMLHttpRequest();
        var url = '/post.txt';
        http.open('GET', url, true);
        var params = "Post-/n" + document.getElementById("textArea") + "/n";
        http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

        http.onreadystatechange = function () {
          if(http.readyState == 4 && http.status == 200) {

            document.getElementById("textArea").textContent = http.responseText;

          }
          else if (http.status >= 400){
            alert("Your mesage posting has failed");
          }
        };
        http.send();
        setTimeout('addPost()', 500);
      };

      function popup(){
        alert("Your message has been posted");
      }

    </script>

    <form action="/postmessage" method="POST">
      
      <div >
        <textarea id="textArea" rows="15" cols="100"></textarea> <br>
      </div>
      
      <div >
        <label for="topic">Topic:</label><br> <br>
        <input type="text" name="topic_input" value="topic"><br> <br>

        <textarea id="data" name="data" rows="10" cols="30"> add text </textarea> <br>

        <input type="submit" value="Submit" onclick="popup()">
      </div>
    </form>

  </body>

</html>